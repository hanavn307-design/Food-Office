<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HÃ´m nay Äƒn gÃ¬?</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-1: #fff6f0;
      --bg-2: #e6f7ff;
      --primary: #ff6b6b;
      --primary-2: #ffd166;
      --text: #1f2937;
      --muted: #6b7280;
      --card: #ffffffcc;
      --shadow: 0 10px 30px rgba(0,0,0,0.12);
      --radius: 20px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100svh;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 800px at 10% -10%, #ffecd2 0%, #ffffff00 60%),
        radial-gradient(1200px 800px at 110% 10%, #c2f0ff 0%, #ffffff00 60%),
        linear-gradient(180deg, #fff 0%, #f9fbff 100%);
    }
    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: clamp(16px, 4vw, 32px);
      display: grid;
      gap: 18px;
      place-items: center;
    }
    header {
      text-align: center;
      margin-top: min(6vh, 30px);
    }
    h1 {
      font-family: Nunito, Inter, sans-serif;
      font-weight: 800;
      letter-spacing: .5px;
      margin: 0 0 8px 0;
      font-size: clamp(28px, 5vw, 48px);
      background: linear-gradient(90deg, #ff6b6b, #ff9f6e 40%, #ffd166 70%, #06b6d4 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .subtitle {
      color: var(--muted);
      font-size: clamp(14px, 2.6vw, 18px);
    }
    .card {
      width: 100%;
      max-width: 820px;
      background: var(--card);
      backdrop-filter: blur(8px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(14px, 3.2vw, 22px);
      display: grid;
      gap: 16px;
    }
    .display {
      border-radius: calc(var(--radius) - 6px);
      overflow: hidden;
      position: relative;
      aspect-ratio: 16 / 9;
      background: #f3f4f6;
      border: 1px solid #eef2f7;
    }
    .display img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transform: scale(1.015);
      transition: opacity .6s ease, transform .6s ease;
    }
    .display img.show {
      opacity: 1;
      transform: scale(1);
    }
    .badge {
      position: absolute;
      top: 12px; left: 12px;
      background: #ffffffd9;
      padding: 8px 12px;
      border-radius: 999px;
      box-shadow: 0 4px 14px rgba(0,0,0,.12);
      font-weight: 700;
      font-family: Nunito, Inter, sans-serif;
      display: flex; align-items: center; gap: 8px;
    }
    .badge .dot {
      width: 10px; height: 10px; border-radius: 50%;
      background: linear-gradient(135deg, #ff6b6b, #ffd166 70%);
      box-shadow: 0 0 0 3px #ffffffa6;
    }
    .actions {
      display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: center;
    }
    .btn {
      appearance: none;
      border: 0;
      background: linear-gradient(90deg, #ff6b6b, #ff9f6e 50%, #ffd166 100%);
      color: white;
      font-weight: 800;
      font-family: Nunito, Inter, sans-serif;
      padding: 14px 22px;
      border-radius: 14px;
      cursor: pointer;
      letter-spacing: .4px;
      box-shadow: 0 10px 20px rgba(255, 107, 107, .25);
      transition: transform .06s ease, filter .2s ease, box-shadow .2s ease;
    }
    .btn:hover { filter: saturate(110%); box-shadow: 0 12px 26px rgba(255, 159, 110, .28); }
    .btn:active { transform: translateY(1px) scale(.995); }
    kbd {
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      border-bottom-width: 2px;
      border-radius: 6px;
      padding: 2px 6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: #374151;
    }
    .note {
      text-align: center;
      color: var(--muted);
      font-size: 14px;
    }

    /* Confetti */
    .confetti {
      position: fixed;
      top: -12px;
      width: 10px; height: 10px;
      border-radius: 2px;
      pointer-events: none;
      animation: fall 1.4s ease-out forwards;
      opacity: .9;
    }
    @keyframes fall {
      0%   { transform: translateY(-20px) rotate(0deg);   }
      100% { transform: translateY(100vh) rotate(360deg); }
    }
    footer {
      text-align: center; color: #94a3b8; font-size: 12px; padding: 8px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>HÃ´m nay Äƒn gÃ¬?</h1>
      <p class="subtitle">Báº¥m nÃºt dÆ°á»›i Ä‘Ã¢y (hoáº·c nháº¥n <kbd>Space</kbd>) Ä‘á»ƒ random 1 trong <strong>30 mÃ³n</strong> phÃ¹ há»£p dÃ¢n vÄƒn phÃ²ng.</p>
    </header>

    <section class="card">
      <div class="display">
        <span class="badge" id="badge">
          <span class="dot"></span>
          <span id="dishName">Sáºµn sÃ ng random mÃ³n!</span>
        </span>
        <img id="dishImg" alt="áº¢nh mÃ³n Äƒn" referrerpolicy="no-referrer" />
        <small id="photo-credit" style="position: absolute; bottom: 12px; right: 12px; background: rgba(255,255,255,0.9); padding: 4px 8px; border-radius: 6px; font-size: 11px; color: #666;"></small>
      </div>
      <div class="actions">
        <button id="randomBtn" class="btn" aria-label="Random mÃ³n Äƒn">ðŸŽ² Random mÃ³n ngay</button>
      </div>
      <p class="note">Máº¹o: Nháº¥n phÃ­m <kbd>Space</kbd> cho tiá»‡n.</p>
    </section>

    <footer>Made for office lunch ðŸ˜‹</footer>
  </div>

  <script>
    // Danh sÃ¡ch 30 mÃ³n Äƒn
    const DISHES = [
      "Phá»Ÿ bÃ²",
      "BÃºn cháº£",
      "BÃ¡nh mÃ¬ thá»‹t",
      "CÆ¡m táº¥m sÆ°á»n bÃ¬ cháº£",
      "Há»§ tiáº¿u Nam Vang",
      "BÃºn bÃ² Huáº¿",
      "BÃ¡nh cuá»‘n",
      "Gá»i cuá»‘n",
      "BÃ¡nh xÃ¨o",
      "CÆ¡m gÃ  Háº£i Nam",
      "MÃ¬ Quáº£ng",
      "BÃºn thá»‹t nÆ°á»›ng",
      "CÆ¡m chiÃªn DÆ°Æ¡ng ChÃ¢u",
      "CÃ¡ kho tá»™",
      "GÃ  rÃ¡n + khoai tÃ¢y",
      "Sushi set",
      "Pizza",
      "Spaghetti Bolognese",
      "Salad cÃ¡ ngá»«",
      "BÃ² lÃºc láº¯c + cÆ¡m",
      "Láº©u ThÃ¡i (Äƒn nhÃ³m)",
      "CÆ¡m vÄƒn phÃ²ng",
      "BÃ¡nh canh giÃ² heo",
      "ChÃ¡o gÃ ",
      "BÃºn riÃªu",
      "BÃ¡nh trÃ¡ng trá»™n",
      "CÆ¡m cÃ  ri gÃ ",
      "Pad Thai",
      "Kimbap + tokbokki",
      "BÃ¡nh Æ°á»›t lÃ²ng gÃ "
    ];

    const nameEl = document.getElementById("dishName");
    const imgEl  = document.getElementById("dishImg");
    const btn    = document.getElementById("randomBtn");

    let lastIndex = -1;

    async function pickRandom() {
      let idx;
      do {
        idx = Math.floor(Math.random() * DISHES.length);
      } while (idx === lastIndex && DISHES.length > 1);
      lastIndex = idx;

      const dish = DISHES[idx];
      nameEl.textContent = dish;

      // Hiá»‡u á»©ng áº£nh
      imgEl.classList.remove("show");
      imgEl.alt = `áº¢nh mÃ³n: ${dish}`;

      // === THÃŠM: láº¥y áº£nh tá»« Pexels ===
      try {
        const { getImageForDish } = await import("./src/pexels.ts");
        const imgInfo = await getImageForDish(dish);

        imgEl.src = imgInfo.src;
        imgEl.alt = imgInfo.alt;

        const credit = document.getElementById("photo-credit");
        if (credit) credit.textContent = imgInfo.credit || "Pexels";
      } catch (error) {
        // Fallback náº¿u khÃ´ng load Ä‘Æ°á»£c Pexels
        console.warn("Pexels load failed, using fallback:", error);
        imgEl.src = "/fallback.jpg";
        const credit = document.getElementById("photo-credit");
        if (credit) credit.textContent = "Fallback";
      }

      imgEl.onload = () => imgEl.classList.add("show");
      burstConfetti();
    }

    function burstConfetti() {
      // Táº¡o má»™t Ã­t confetti vui máº¯t
      for (let i = 0; i < 16; i++) {
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = Math.random() * 100 + "vw";
        c.style.background = `hsl(${Math.random()*360}, 90%, 60%)`;
        c.style.transform = `translateY(-20px) rotate(${Math.random()*180}deg)`;
        c.style.animationDuration = (1.1 + Math.random()*0.6).toFixed(2) + "s";
        c.style.width = c.style.height = (8 + Math.random()*8) + "px";
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 1800);
      }
    }

    btn.addEventListener("click", pickRandom);
    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") { e.preventDefault(); pickRandom(); }
    });

    // Random sáºµn 1 mÃ³n khi má»Ÿ trang
    pickRandom();
  </script>
</body>
</html>

